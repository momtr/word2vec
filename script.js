let word2vec;
let text;

function preload() {
    // text = "The Republic of Plato is the longest of his works with the exception of the Laws, and is certainly the greatest of them. There are nearer approaches to modern metaphysics in the Philebus and in the Sophist; the Politicus or Statesman is more ideal; the form and institutions of the State are more clearly drawn out in the Laws; as works of art, the Symposium and the Protagoras are of higher excellence. But no other Dialogue of Plato has the same largeness of view and the same perfection of style; no other shows an equal knowledge of the world, or contains more of those thoughts which are new as well as old, and not of one age only but of all. Nowhere in Plato is there a deeper irony or a greater wealth of humour or imagery, or more dramatic power. Nor in any other of his writings is the attempt made to interweave life and speculation, or to connect politics with philosophy. The Republic is the centre around which the other Dialogues may be grouped; here philosophy reaches the highest point (cp, especially in Books V, VI, VII) to which ancient thinkers ever attained. Plato among the Greeks, like Bacon among the moderns, was the first who conceived a method of knowledge, although neither of them always distinguished the bare outline or form from the substance of truth; and both of them had to be content with an abstraction of science which was not yet realized. He was the greatest metaphysical genius whom the world has seen; and in him, more than in any other ancient thinker, the germs of future knowledge are contained. The sciences of logic and psychology, which have supplied so many instruments of thought to after-ages, are based upon the analyses of Socrates and Plato. The principles of definition, the law of contradiction, the fallacy of arguing in a circle, the distinction between the essence and accidents of a thing or notion, between means and ends, between causes and conditions; also the division of the mind into the rational, concupiscent, and irascible elements, or of pleasures and desires into necessary and unnecessary—these and other great forms of thought are all of them to be found in the Republic, and were probably first invented by Plato. The greatest of all logical truths, and the one of which writers on philosophy are most apt to lose sight, the difference between words and things, has been most strenuously insisted on by him (cp. Rep.; Polit.; Cratyl. 435, 436 ff), although he has not always avoided the confusion of them in his own writings (e.g. Rep.). But he does not bind up truth in logical formulae,—logic is still veiled in metaphysics; and the science which he imagines to 'contemplate all truth and all existence' is very unlike the doctrine of the syllogism which Aristotle claims to have discovered (Soph. Elenchi, 33. 18) Neither must we forget that the Republic is but the third part of a still larger design which was to have included an ideal history of Athens, as well as a political and physical philosophy. The fragment of the Critias has given birth to a world-famous fiction, second only in importance to the tale of Troy and the legend of Arthur; and is said as a fact to have inspired some of the early navigators of the sixteenth century. This mythical tale, of which the subject was a history of the wars of the Athenians against the Island of Atlantis, is supposed to be founded upon an unfinished poem of Solon, to which it would have stood in the same relation as the writings of the logographers to the poems of Homer. It would have told of a struggle for Liberty (cp. Tim. 25 C), intended to represent the conflict of Persia and Hellas. We may judge from the noble commencement of the Timaeus, from the fragment of the Critias itself, and from the third book of the Laws, in what manner Plato would have treated this high argument. We can only guess why the great design was abandoned; perhaps because Plato became sensible of some incongruity in a fictitious history, or because he had lost his interest in it, or because advancing years forbade the completion of it; and we may please ourselves with the fancy that had this imaginary narrative ever been finished, we should have found Plato himself sympathising with the struggle for Hellenic independence (cp. Laws, iii. 698 ff.), singing a hymn of triumph over Marathon and Salamis, perhaps making the reflection of Herodotus (v. 78) where he contemplates the growth of the Athenian empire—'How brave a thing is freedom of speech, which has made the Athenians so far exceed every other state of Hellas in greatness!' or, more probably, attributing the victory to the ancient good order of Athens and to the favor of Apollo and Athene (cp. Introd. to Critias). Again, Plato may be regarded as the 'captain' ('arhchegoz') or leader of a goodly band of followers; for in the Republic is to be found the original of Cicero's De Republica, of St. Augustine's City of God, of the Utopia of Sir Thomas More, and of the numerous other imaginary States which are framed upon the same model. The extent to which Aristotle or the Aristotelian school were indebted to him in the Politics has been little recognised, and the recognition is the more necessary because it is not made by Aristotle himself. The two philosophers had more in common than they were conscious of; and probably some elements of Plato remain still undetected in Aristotle. In English philosophy too, many affinities may be traced, not only in the works of the Cambridge Platonists, but in great original writers like Berkeley or Coleridge, to Plato and his ideas. That there is a truth higher than experience, of which the mind bears witness to herself, is a conviction which in our own generation has been enthusiastically asserted, and is perhaps gaining ground. Of the Greek authors who at the Renaissance brought a new life into the world Plato has had the greatest influence. The Republic of Plato is also the first treatise upon education, of which the writings of Milton and Locke, Rousseau, Jean Paul, and Goethe are the legitimate descendants. Like Dante or Bunyan, he has a revelation of another life; like Bacon, he is profoundly impressed with the unity of knowledge; in the early Church he exercised a real influence on theology, and at the Revival of Literature on politics. Even the fragments of his words when 'repeated at second-hand' (Symp. 215 D) have in all ages ravished the hearts of men, who have seen reflected in them their own higher nature. He is the father of idealism in philosophy, in politics, in literature. And many of the latest conceptions of modern thinkers and statesmen, such as the unity of knowledge, the reign of law, and the equality of the sexes, have been anticipated in a dream by him. The argument of the Republic is the search after Justice, the nature of which is first hinted at by Cephalus, the just and blameless old man—then discussed on the basis of proverbial morality by Socrates and Polemarchus—then caricatured by Thrasymachus and partially explained by Socrates—reduced to an abstraction by Glaucon and Adeimantus, and having become invisible in the individual reappears at length in the ideal State which is constructed by Socrates. The first care of the rulers is to be education, of which an outline is drawn after the old Hellenic model, providing only for an improved religion and morality, and more simplicity in music and gymnastic, a manlier strain of poetry, and greater harmony of the individual and the State. We are thus led on to the conception of a higher State, in which 'no man calls anything his own,' and in which there is neither 'marrying nor giving in marriage,' and 'kings are philosophers' and 'philosophers are kings;' and there is another and higher education, intellectual as well as moral and religious, of science as well as of art, and not of youth only but of the whole of life. Such a State is hardly to be realized in this world and quickly degenerates. To the perfect ideal succeeds the government of the soldier and the lover of honour, this again declining into democracy, and democracy into tyranny, in an imaginary but regular order having not much resemblance to the actual facts. When 'the wheel has come full circle' we do not begin again with a new period of human life; but we have passed from the best to the worst, and there we end. The subject is then changed and the old quarrel of poetry and philosophy which had been more lightly treated in the earlier books of the Republic is now resumed and fought out to a conclusion. Poetry is discovered to be an imitation thrice removed from the truth, and Homer, as well as the dramatic poets, having been condemned as an imitator, is sent into banishment along with them. And the idea of the State is supplemented by the revelation of a future life."
    //text = "Die Regierung ruft Ausgangsbeschränkungen für das ganze Land aus. Alle Bewohner sollen in ihren Wohnungen bleiben  abgesehen von vier Ausnahmen. Die aktuellen Ereignisse im Liveticker.Die Bundesregierung ruft für ganz Österreich ein Versammlungsverbot und Ausgangsbeschränkung aus. Das sagte Bundeskanzler Sebastian Kurz am Sonntag. Für Ausnahmen  das Haus zu verlassen  soll es nur drei Gründe geben: Berufsarbeit  die nicht aufschiebbar ist  dringend notwendige Besorgungen (Lebensmittel) und wenn man anderen Menschen helfen muss.Wer im dringenden Fall ins Freie möchte der darf das ausschließlich alleine machen oder mit den Personen  mit denen er in der Wohnung gemeinsam zusammenlebt so der Bundeskanzler. Spielplätze und Sportplätze müssen ebenso schließen wie Restaurants  die ab Dienstag ganz zu haben. Zudem werden ehemalige Zivildiener und die Miliz eingezogen.Landeshauptmann Günther Platter verordnet eine Verkehrsbeschränkung aller Personen  die sich in Tirol aufhalten. Ohne triftigen Grund darf niemand in Tirol seine Wohnung verlassen. Es ist aber erlaubt  einkaufen zu gehen  Besorgungen bei der Apotheke zu machen  Geld vom Geldautomaten abzuheben  zum Arzt zu gehen oder den Hund auszuführen sagte Platter. Das gilt (vorerst) für eine Woche.Nationalrat: Die Coronavirus-Krise sorgt auch im Nationalrat für eine Ausnahmesituation: Damit die Sonderregeln zu allen Einschränkungen verfassungskonform in Kraft treten können  braucht es am Wochenende einen Sitzungsmarathon im Schnellverfahren. Die Beschlüsse sollen am Ende erfolgen.800 Personen sind in Österreich bisher positiv auf das neuartige Coronavirus getestet worden. Das gab das Gesundheitsministerium am Sonntag bekannt. Insgesamt wurden 8.167 Personen auf eine Infektion untersucht. Zwei Patienten sind bisher in Wien verstorben  sechs sind wieder genesen.Die meisten Fälle gibt es mit 245 in Tirol. In Niederösterreich wurden 112 Personen  in Wien 108  in der Steiermark 83  in Oberösterreich 116  in Salzburg 39  im Burgenland zehn  in Vorarlberg 39 und Kärnten sechs positiv getestet. Laut Johns Hopkins Universität wurden weltweit 156.400 Corona-Erkrankte registriert  5.833 sind verstorben.Damit die Sonderregeln zur Einschränkung von diversen Bereichen am Montag verfassungskonform in Kraft treten können  braucht es am Wochenende einen Sitzungsmarathon im Schnellverfahren. Die erste Etappe fand am Samstag statt. Bis zu vier Milliarden Euro werden als erster Krisenfonds von der Bundesregierung zur Verfügung gestellt. Das Nulldefizit ist abgesagt.Die Kärntner Gemeinde Heiligenblut steht bis 29. März unter Quarantäne. Ausländische Gäste dürfen abreisen  für Österreicher ist die An- und Abfahrt gesperrt. Gleiches gilt seit  Freitag für das Paznauntal und St. Anton am Arlberg.Ab Montag bleiben in Österreich Geschäfte geschlossen - ausgenommen sind Lebensmittelhandel  Banken  Drogerien  Post  Apotheken  Tankstellen  Trafiken und Tierfutterhandel.Der Tiroler Landeshauptmann Günther Platter verordnet eine Verkehrsbeschränkung  de facto also eine Ausgangssperre. Ausnehmen gelten nur für Arbeit  Notfälle oder den Einkauf von Lebensmitteln und Medikamenten.Der Kampf gegen die Ausbreitung des Coronavirus hat in Tirol eine der gravierendsten öffentlichen Maßnahmen der Geschichte zur Folge: Landeshauptmann Günther Platter (ÖVP) kündigte in einer Erklärung an  eine Verkehrsbeschränkung zu verordnen  de facto also eine Ausgangssperre. Ausnahmen seien nur Notfälle oder wenn die Menschen Lebensmittel und Medikamente einkaufen bzw. zur Arbeit müssten.Die Maßnahme tritt mit Aushang der Verordnung noch am Sonntag in Kraft  sagte Platter in der Erklärung  die im ORF sowie auf der Facebook-Seite des Landes aus dem Landhaus übertragen wurde. Die Verkehrsbeschränkung aller Personen  die sich in Tirol aufhalten  gelte vorerst für eine Woche  so der Landeshauptmann. Ohne einen triftigen Grund darf niemand seine Wohnung verlassen betonte Platter.Als Ausnahmen führte der Landeschef beruflich notwendige Gründe  medizinische Versorgung  Versorgung der Grundbedürfnisse  Rückkehr zum eigenen Wohnort und wenn es berechtigte Gründe zum Verlassen des Landes gibt an. Die Menschen dürften nur noch in Ausnahmefällen das eigene Haus verlassen. Es ist aber erlaubt  einkaufen zu gehen  Besorgungen bei der Apotheke zu machen  Geld vom Geldautomaten abzuheben  zum Arzt zu gehen oder den Hund auszuführen  sagte er.Tirol schützt sich selbstZudem sei der Weg vom Arbeitsplatz und zurück nicht von der Sperre umfasst. Allerdings seien die Menschen angehalten  nach Möglichkeit von zu Hause aus zu arbeiten. Auch Besuche bei Älteren und Minderjährigen  körperlich geschwächten Personen und Behinderten blieben erlaubt. Auch Besorgungen für Menschen  die ihre Wohnungen nicht mehr verlassen können oder sollen  seien weiter erlaubt.Es handle sich um die schwierigste Situation  die Tirol in der Nachkriegsgeschichte je hatte  machte Platter deutlich. Es gelte  Verhältnisse zu vermeiden  wie es sie in Teilen Italiens gibt. Tirol schützt sich selbst  so der Landeshauptmann  der eine Garantie für die Aufrechterhaltung der Versorgungssicherheit abgab.Ich weiß  ich verlange sehr viel von Ihnen: Aber es ist notwendig  erklärte Platter sichtlich emotional. Die Maßnahmen seien notwendig  um uns selbst zu schützen. Nur so kann es uns gelingen  dass die Zeit rasch wiederkommt  die wir uns wünschen sagte der Landeshauptmann und schloss mit folgenden Worten an die Landsleute: Ich bin einfach unglaublich stolz auf Sie. Jetzt heißt's dahoam bleiben  wir packen's."
    // text = "paris is the capital of france. vienna is the capital of, austria. marseilles is in france. graz is in austria"
    // text = 'The little princess hid herself in the woods, but she soon got very tired. She sat on a log and started to cry, when a prince, who was passing by on his steed, heard her. As soon as he saw the pretty princess, the young prince fell in love with her. Then it was the youngest daughter’s turn. “My father and king, I love you as much as all the salt in the world and more!” The king was very surprised at her answer. “What did you say? I think I must have misheard you," frowned the king. “I said that I love you as much as salt," repeated the youngest daughter. “Oh, father," said the eldest daughter, “I love you as much as all the diamonds and all the rubies in the world and more!” "That is excellent," said the king happily. In a kingdom far, far away lived a king and his three daughters. The king loved them very much for they were good and beautiful girls, but one day he decided to test how much they loved him.'
    text = 'The little princess hid herself in the woods, but she soon got very tired. She sat on a log and started to cry, when a prince, who was passing by on his steed, heard her. As soon as he saw the pretty princess, the young prince fell in love with her. Then it was the youngest daughter’s turn. “My father and king, I love you as much as all the salt in the world and more!” The king was very surprised at her answer. “What did you say? I think I must have misheard you," frowned the king. “I said that I love you as much as salt," repeated the youngest daughter. “Oh, father," said the eldest daughter, “I love you as much as all the diamonds and all the rubies in the world and more!” "That is excellent," said the king happily. In a kingdom far, far away lived a king and his three daughters. The king loved them very much for they were good and beautiful girls, but one day he decided to test how much they loved him. The salt bearer lifted her veil and the king saw his youngest daughter. He understood at once what the prince and princess wanted to teach him. Ashamed of what he had done, the king begged his daughter to forgive him. The princess cried out in joy, “Oh, my father! I forgive you and I love you with all my heart!” They hugged each other and the king, the prince and the princess lived happily ever after. So when the wedding day came, the King arrived. He sat at the banqueting table in the place of honour next to the prince. Then he was served a meal, which looked absolutely delicious. But when the king came to taste it, he frowned and cried out, “This meal has no salt in it! I can’t eat it!". The prince took her to his castle and soon asked her to marry him. The young princess told him that she would only marry him if her father, the king, came to the wedding. “Sadly, my father is angry with me and has told me never to return to his kingdom," she explained. “How dare you! Your sisters love me as much as diamonds and gold, and you love me as little as salt," said the king angrily. "Leave this kingdom right now and never come back!” “Dear father," said the second daughter, “I love you as much as all the gold and silver in the world and more!” “Wonderful!” said her father and smiled. The king gathered his daughters around him and asked each of them the same question: “How much do you love me?”';
}

function setup() {

    // display the text
    document.getElementById('lookup').innerHTML = text + "<br><br>";

    // word2vec = new Word2Vec(text, 100, stopWords);
    // word2vec.train(7, 70);
    let learningRate = 0.1;
    word2vec = new Word2Vec(text, 160, 0, learningRate);

    // show in in DOM
    for(let i = 0; i < word2vec.data.length; i++) {
        let sen = word2vec.data[i];
        for(let j = 0; j < sen.length; j++) {
            document.getElementById('lookup').innerHTML += "<br>" + word2vec.data[i][j] + ": " + word2vec.lookup[word2vec.data[i][j]]
        }
    }

    let windowSize = 5;
    epochs = 100;
    word2vec.train(windowSize, epochs);

   //  let austria = word2vec.vec('austria')
    // let vienna = word2vec.vec('vienna')
    // let paris = word2vec.vec('paris')
    // let capital = word2vec.vec('capital')
    // let sub = Matrix.subtract(austria, capital)
    // console.log(word2vec.toWord(sub))

    // let er = sub.add(paris)
    // let word_s = word2vec.toWord(er);
    // console.log(word_s);

}

